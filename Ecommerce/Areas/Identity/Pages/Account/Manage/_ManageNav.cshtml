@using Ecommerce.Models
@inject SignInManager<ApplicationUser> SignInManager
@{
    var hasExternalLogins = (await SignInManager.GetExternalAuthenticationSchemesAsync()).Any();
}
@{
    // Clase base
    string baseClass = "group flex items-center px-4 py-3 text-sm font-medium rounded-md transition-all duration-200 mb-1";

    // Estilo Activo (Borde verde, fondo más claro)
    string activeClass = "bg-gray-700 text-white border-l-4 border-accent shadow-md";

    // Estilo Inactivo
    string inactiveClass = "text-gray-300 hover:bg-gray-700 hover:text-white";

    // Helper para detectar página activa
    string GetClass(string navPage)
    {
        var activePage = ViewContext.ViewData["ActivePage"] as string
            ?? System.IO.Path.GetFileNameWithoutExtension(ViewContext.ActionDescriptor.DisplayName);
        return string.Equals(activePage, navPage, StringComparison.OrdinalIgnoreCase) ? activeClass : inactiveClass;
    }
}

<nav>
    <a class="@baseClass @GetClass("Index")" id="profile" asp-page="./Index">
        <i class="fas fa-user-circle w-6 text-center mr-3 text-lg"></i> Perfil
    </a>

    <a class="@baseClass @GetClass("Email")" id="email" asp-page="./Email">
        <i class="fas fa-envelope w-6 text-center mr-3 text-lg"></i> Email
    </a>

    <a class="@baseClass @GetClass("ChangePassword")" id="change-password" asp-page="./ChangePassword">
        <i class="fas fa-key w-6 text-center mr-3 text-lg"></i> Contraseña
    </a>

    @if (hasExternalLogins)
    {
        <a class="@baseClass @GetClass("ExternalLogins")" id="external-login" asp-page="./ExternalLogins">
            <i class="fab fa-google w-6 text-center mr-3 text-lg"></i> Logins Externos
        </a>
    }

    <a class="@baseClass @GetClass("TwoFactorAuthentication")" id="two-factor" asp-page="./TwoFactorAuthentication">
        <i class="fas fa-shield-alt w-6 text-center mr-3 text-lg"></i> Seguridad 2FA
    </a>

    <a class="@baseClass @GetClass("PersonalData")" id="personal-data" asp-page="./PersonalData">
        <i class="fas fa-database w-6 text-center mr-3 text-lg"></i> Datos Personales
    </a>

    <div class="border-t border-gray-700 my-4 pt-4">
        <a class="@baseClass text-accent hover:bg-gray-700 hover:text-white" asp-controller="Pedidos" asp-action="Index">
            <i class="fas fa-box-open w-6 text-center mr-3 text-lg"></i> Ir a Mis Pedidos
        </a>
    </div>
</nav>